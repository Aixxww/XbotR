# replies_data.py (V1: 截流神评特化版)
# -*- coding: utf-8 -*-
import random

class ReplyLibrary:
    """
    V1：为了获得“回复点赞”而设计的长难句库
    特点：细节描写、夸张修辞、情感爆发
    """

    # 1. 关键词映射 (保持精准)
    KEYWORDS = {
        'manga': ['漫画', 'マンガ', '更新', '続き', '連載', 'オチ', 'トーン', '創作', '日記'],
        'art': ['絵', 'イラスト', 'art', 'rkgk', '厚塗', '線画', 'skeb', '納品', '描', '視線'],
        'funny': ['w', 'ww', '草', '笑', '爆笑', 'ネタ', '天才', '腹筋', '吹いた'],
        'sad': ['鬱', '死にたい', '仕事', '残業', '辛い', '無理', '疲'],
        'crypto': ['BTC', 'ETH', 'ビットコイン', '暴落', '高騰', 'チャート']
    }

    # 2. 神评回复池
    REPLIES = {
        # === 漫画/剧情：主打“沉浸感”和“催更” ===
        'manga': [
            "最後のコマの表情、良すぎて心臓止まるかと思いました...😇",
            "この展開は予想外すぎる...！次回更新までどうやって生きればいいんですか？",
            "1ページ目から引き込まれて、気づいたら全話読み返してました。",
            "伏線の回収が見事すぎて鳥肌立ちました...天才ですか？",
            "わかりみが深すぎて、首がもげるほど頷きながら読みました。",
            "このキャラの心情描写、解釈一致すぎて泣いた😭🤝",
            "書籍化したら絶対買います。いや、保存用と布教用で3冊買います。",
            "オチの勢いが好きすぎるwww 電車で読むんじゃなかったw",
            "尊すぎて画面の前で合掌しました🙏 ありがとう...ありがとう...",
            "待って、この二人の空気感最高すぎませんか？（遺言）",
            "最後のコマで無事死亡しました😇",  # 最后一格安详去世 (神评预定)
            "続きが気になりすぎて夜しか眠れません！", # 废话文学
            "この展開は予想できなかった...天才？",
            "表情の描写が良すぎて何回も見ちゃう。",
            "尊すぎて語彙力消滅した。",
            "あー...（浄化される音）",
            "ここテストに出るレベルで重要。",
            "全人類がこれを見る義務があると思う。",
            "解釈一致ですありがとうございます🤝", # 懂行的人才会回这句
            "心臓が持ちません...最高です...",
            "待って、しんどい...好き...",
            "供給ありがとうございます🙏 寿命延びました。",
            "書籍化はいつですか？？", # 对原创漫画的最高赞美
            "わかりみが深すぎて辛いw",
            "オチが秀逸すぎるwww"
        ],

        # === 插画/视觉：主打“细节控”和“夸张赞美” ===
        'art': [
            "拡大して瞳の書き込みまで拝見しました...宝石みたいに綺麗です✨",
            "色彩センスが神がかってて、見てるだけで視力が回復しました👀✨",
            "光と影の使い方が天才的すぎる...どうやったらこんな風に塗れるんですか？",
            "この透明感...！画面越しでもマイナスイオン感じました🌿",
            "服のシワの質感とか、髪のなびき方とか、こだわりが凄まじい...",
            "一目見た瞬間に保存しました。スマホの壁紙にさせてください🙇‍♂️",
            "線画の時点で美しいのに、着彩でさらに神になるとは...",
            "この世界観に一生住みたい。空気感まで伝わってきます。",
            "供給過多で死にそうです...最高のイラストありがとうございます😭🙏",
            "絵柄がどストライクすぎて、フォローせずにはいられませんでした。",
            "透明感がすごすぎて画面割れた（？）", 
            "拡大して細部まで見ちゃいました。服のシワとか最高です。", # 夸细节 (显得懂画)
            "この世界観、住みたい。", 
            "眼福です🙏 即保存しました。",
            "光の表現が美しすぎる...",
            "色彩センスが神がかってる…✨",
            "美しすぎてため息出た。",
            "スマホの壁紙にしてもいいですか...？", # 礼貌询问 (容易被作者回复)
            "線画からしてもう美しい。",
            "才能が怖い。",
            "あぁ...好き...（語彙力）",
            "絵柄がどストライクすぎて辛い。",
            "天才ですか？（天才ですね）",
            "朝からいいもの見れました✨"
        ],

        # === 搞笑：主打“吐槽”和“场景感” ===
        'funny': [
            "朝から腹筋崩壊したwww 賠償請求していいですか？🤣",
            "その発想はなかったわ...天才すぎて悔しいwww",
            "電車の中で吹き出しそうになって必死に耐えてるwww",
            "今年一番笑ったかもしれないw センスの塊かよw",
            "誰かこの人を止めてくれwww お腹痛いwwww",
            "深夜に見るもんじゃなかった...（飯テロ的な意味で/笑い的な意味で）",
            "ワードセンスが独特すぎてツボから抜け出せないw",
            "草", "草www", "草不可避", "ww", "www", "wwww",
            "腹筋崩壊したwww", "電車で吹き出したわw",
            "その発想はなかったw", "天才すぎて悔しいw",
            "やめてwww", "誰かこの人を止めてくれwww",
            "声出して笑ったw", "深夜に見るもんじゃなかったw"
        ],

        # === 只有图且无法分类：主打“氛围感” (万能神评) ===
        'image_ambiguous': [
            "言葉はいらない、ただただ最高。🙏✨",
            "なぜかわからないけど、この画像見てるとすごく落ち着く...",
            "この1枚に物語が詰まってる感じがして、すごく好きです。",
            "タイムライン流し見してたけど、これだけは指が止まった。",
            "これは伸びる（確信）。古参面させてください。",
            "雰囲気めっちゃ好きです。もっと評価されるべき才能。",
            "語彙力がなさすぎて「すごい」しか言えないのが悔しい...",
            "雰囲気めっちゃ好きです。",
            "なんかこれ、すごく刺さる。",
            "言葉はいらない、ただ最高。",
            "センスの塊。",
            "見入ってしまった...",
            "芸術だ...",
            "良き...",
            "かっこいい...",
            "これもっと評価されるべき。"
        ],

        # === 通用兜底 ===
        'general': [
            "このツイート、教科書に載せるべきでは？🤔",
            "FF外から失礼します。その視点は鋭すぎて膝を打ちました。",
            "結論：世の中世知辛いけど、これ見て元気出た。",
            "歴史的瞬間を目撃した気がする。",
            "これはバズる予感しかしない。記念カキコ。",
            "全米が泣いた。いや全私が泣いた😭",
            "やばいw", "マジかよw", "えっwwww", "すげぇ...", 
            "これはバズる。", "歴史的瞬間を見た。", 
            "タイムラインで一番輝いてた。", "シンプルに好き。",
            "通知見て飛んできました。", "結論：世の中世知辛い。",
            "それな。", "確かに。", "間違いない。"
        ]
    }

    # 3. 动态Emoji后缀 (保持原样)
    SUFFIXES = ["", "✨", "🙏", "😭", "w", "ww", "！", "...", "😅", "😇", "🔥", "🤔", "☺️", "❤️", "🥹", "🐣", "😳", "💛", "😂", "🤣", "🩵", "😍", "🩷"]

    @staticmethod
    def get_smart_reply(text_content, has_media=False):
        text = text_content.lower()
        selected_category = 'general'
        
        # 1. 关键词匹配
        for category in ['manga', 'art', 'crypto', 'sad', 'funny']:
            if any(k in text for k in ReplyLibrary.KEYWORDS.get(category, [])):
                selected_category = category
                break
        
        # 2. 视觉强制匹配 (如果没命中关键词但有图)
        if selected_category == 'general' and has_media:
            rand = random.random()
            if rand < 0.4: selected_category = 'art'
            elif rand < 0.7: selected_category = 'image_ambiguous'
            else: selected_category = 'manga'

        # 3. 抽取
        base_reply = random.choice(ReplyLibrary.REPLIES.get(selected_category, ReplyLibrary.REPLIES['general']))
        
        # 4. 20% 概率加短后缀 (因为句子已经很长了，少加一点)
        if random.random() < 0.3:
            # 移除原句末尾标点再加
            base_reply = base_reply.rstrip("。！") + random.choice(ReplyLibrary.SUFFIXES)
             
        return base_reply
